[Tests]
  [exceed_available]
    type = RunException
    input = nek_error.i
    cli_args = 'UserObjects/scalar1/usrwrk_slot=4'
    expect_err = "This parameter cannot exceed the available pre-allocated slots \(1\)."
    requirement = "The system shall error if trying to write stochastic input into a scratch space slot that has not been allocated"
    required_objects = 'NekRSProblem'
  []
  [overlap_coupling]
    type = RunException
    input = nek_error.i
    expect_err = "Cannot write into a scratch space slot reserved for Nek-MOOSE coupling"
    requirement = "The system shall error if trying to write stochastic input into a scratch space slot that is needed for other physics coupling purposes."
    required_objects = 'NekRSProblem'
  []
  [standalone_scratch]
    type = RunException
    input = nek_standalone_error.i
    expect_err = "This parameter cannot exceed the available pre-allocated slots \(0\)."
    requirement = "The system shall error if the scratch space is not allocated via Cardinal for stochastic cases for standalone Nek runs. We only need to test this for the standalone case because the other two coupling classes (NekRSProblem, NekRSSeparateDomainProblem) automatically require scratch allocated from Cardinal."
    required_objects = 'NekRSProblem'
  []
  [lower_gap]
    type = RunException
    input = min_gap.i
    expect_err = "The 'usrwrk_slot' specified for the NekScalarValue user objects must not exhibit\n"
                 "any gaps between the slots used for multiphysics coupling \(0, 1\) and the first\n"
                 "slot used for NekScalarValue \(3\)"
    requirement = "The system shall error if there is a gap between the slots used for coupling (0 to n) "
                  "and the slots needed for NekScalarValue, because this would mess up the host to device "
                  "data transfer."
    required_objects = 'NekRSProblem'
  []
  [interior_gap]
    type = RunException
    input = gap.i
    expect_err = "The 'usrwrk_slot' specified for the NekScalarValue user objects must not exhibit\n"
                 "any gaps. You are currently allocating scalar values into non-contiguous slots \(2, 4, 5\)"
    requirement = "The system shall error if there is a gap between the slots used for NekScalarValues, "
                  "because this would mess up the host to device data transfer."
    required_objects = 'NekRSProblem'
  []
  [postprocessor]
    type = CSVDiff
    input = driver.i
    csvdiff = driver_out_nek0.csv
    requirement = "The system shall allow the NekScalarValue user objects to be represented as postprocessors."
    required_objects = 'NekRSProblem'
  []
  [driver_multi_fld]
    type = CheckFiles
    input = driver_multi.i
    cli_args = 'MultiApps/nek/cli_args="Problem/write_fld_files=true"'

    # the particular files we compare against assume that we made 3 sub-apps
    min_parallel = 3
    max_parallel = 3
    check_files = 'a00ethier0.f00001 a01ethier0.f00001 a02ethier0.f00001'
    requirement = "The system shall stochastic values to be sent from MOOSE to NekRS and write unique NekRS field files for each."
    required_objects = 'NekRSProblem'
  []
  [driver_multi_transient]
    type = CSVDiff
    input = driver_transient.i

    # the particular files we compare against assume that we made 3 sub-apps
    min_parallel = 3
    max_parallel = 3
    csvdiff = 'driver_transient_out_nek0.csv driver_transient_out_nek1.csv driver_transient_out_nek2.csv'
    requirement = "The system shall stochastic values to be sent from MOOSE to NekRS. This example sends time-dependent "
                  "random values from MOOSE to NekRS, where time synchronization is driven by the main app"
    required_objects = 'NekRSProblem'
  []
[]
